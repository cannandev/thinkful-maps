!function(){function e(e,t){var a=document.getElementById("location-select"),o=document.createElement("option");o.text=t.name,o.value=e,a.appendChild(o),a.selectedIndex=0,$(a).on("change",t,n)}function n(e){var n=$("#location-select").find("option:selected").text();e.data.name===n&&(s.setCenter(e.data),a(this.selectedIndex-1))}function t(e){var n=new Date(1e3*parseInt(e.date)),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=$(".image-wrapper.template").clone().removeClass("template");a.find("h3").text(e.name),a.find("img").attr({src:e.url,alt:e.name}),a.find(".likes").append(e.likes+" likes"),a.find(".comments").append(e.comments+" comments"),a.find(".date").append("Last booked on "+t[n.getMonth()]+" "+n.getDate()),a.find(".social a").attr({href:e.link,target:"_blank"}),$(".image-slider").append(a)}function a(e){var n=$(".details .image-wrapper");$(n[e]).addClass("active").siblings().removeClass("active"),$(".intro").fadeOut("slow"),$(".details").fadeIn("slow"),$("#map-canvas").animate({height:750})}function o(){$(".intro").fadeIn("slow"),$(".details").fadeOut("slow"),$("#map-canvas").animate({height:500})}function i(e){var n=new google.maps.Marker({animation:google.maps.Animation.DROP,map:s,position:e,title:e.name,index:c.length-1}),t=new google.maps.InfoWindow({content:"<h4>"+n.title+'</h4><img src="'+c[n.index]+'"/>'});n.addListener("click",function(){s.setCenter(n.getPosition()),t.close(),a(n.index)}),n.addListener("mouseover",function(){t.setZIndex(1e3),t.open(s,n)}),n.addListener("mouseout",function(){t.close()})}function l(){var e={lat:31.9639977,lng:35.90654797};s=new google.maps.Map(document.getElementById("map-canvas"),{center:e,scrollwheel:!1,zoom:3,mapTypeControl:!1})}var s,c=[];$.ajax({type:"GET",dataType:"jsonp",cache:!1,url:"https://api.instagram.com/v1/users/336431628/media/recent/?access_token=829290775.5f79be6.e09d3652a36f42cea5f8426426d844f8",success:function(n){for(var a=n.data,o=0;o<a.length;o++)if(a[o].location){var l={lat:a[o].location.latitude,lng:a[o].location.longitude,name:a[o].location.name},s={url:a[o].images.standard_resolution.url,name:a[o].location.name,likes:a[o].likes.count,comments:a[o].comments.count,date:a[o].created_time,link:a[o].link};e(o,l),c.push(a[o].images.thumbnail.url),i(l),t(s)}$(".image-wrapper.template").remove()}}),$(document).ready(function(){l(),$("#close-detail").click(function(){o()})})}();