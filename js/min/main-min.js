!function(){function e(e,n){var a=document.getElementById("location-select"),o=document.createElement("option");o.text=n.name,o.value=e,a.appendChild(o),a.selectedIndex=0,$(a).on("change",n,t)}function t(e){var t=$("#location-select").find("option:selected").text();e.data.name===t&&(i.setCenter(e.data),console.log(e.data))}function n(e){var t=new Date(1e3*parseInt(e.date)),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=$(".image-wrapper.template").clone().removeClass("template");a.find("img").attr({src:e.url,alt:e.name}),a.find(".likes").text(e.likes+" likes"),a.find(".comments").text(e.comments+" comments"),a.find(".date").text("Last visited on "+n[t.getMonth()]+" "+t.getDate()),$(".image-slider").append(a)}function a(e,t){var n=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,position:t,title:t.name,index:e}),a=$(".details .image-wrapper"),o=new google.maps.InfoWindow({content:"<h4>"+n.title+'</h4><img src="'+c[n.index]+'"/>'});n.addListener("click",function(){i.setCenter(n.getPosition()),o.close(),$(a[n.index]).addClass("active"),$("#map-canvas").animate({height:300}),$(".details").fadeIn("slow")}),n.addListener("mouseover",function(){o.setZIndex(1e3),o.open(i,n)}),n.addListener("mouseout",function(){o.close()})}function o(){var e={lat:31.9639977,lng:35.90654797};i=new google.maps.Map(document.getElementById("map-canvas"),{center:e,scrollwheel:!1,zoom:3})}var i,c=[];$.ajax({type:"GET",dataType:"jsonp",cache:!1,url:"https://api.instagram.com/v1/users/336431628/media/recent/?access_token=829290775.5f79be6.e09d3652a36f42cea5f8426426d844f8",success:function(t){for(var o=t.data,i=0;i<o.length;i++){var s={lat:o[i].location.latitude,lng:o[i].location.longitude,name:o[i].location.name},l={url:o[i].images.standard_resolution.url,name:o[i].location.name,likes:o[i].likes.count,comments:o[i].comments.count,date:o[i].created_time};e(i,s),c.push(o[i].images.thumbnail.url),a(i,s),n(l)}}}),$(document).ready(function(){o(),$("#location-select").change(function(){$("#map-canvas").animate({height:800})})})}();