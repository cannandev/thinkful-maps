!function(){function e(e,a){var n=document.getElementById("location-select"),o=document.createElement("option");o.text=a.name,o.value=e,n.appendChild(o),n.selectedIndex=0,$(n).on("change",a,t)}function t(e){var t=$("#location-select").find("option:selected").text();e.data.name===t&&i.setCenter(e.data)}function a(e){var t=new Date(1e3*parseInt(e.date)),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=$(".image-wrapper.template").clone().removeClass("template");n.find("img").attr({src:e.url,alt:e.name}),n.find(".likes").text(e.likes+" likes"),n.find(".comments").text(e.comments+" comments"),n.find(".date").text("Last booked on "+a[t.getMonth()]+" "+t.getDate()),$(".image-slider").append(n)}function n(e,t){var a=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,position:t,title:t.name,index:e}),n=new google.maps.InfoWindow({content:"<h4>"+a.title+'</h4><img src="'+s[a.index]+'"/>'});a.addListener("click",function(){var e=$(".details .image-wrapper");i.setCenter(a.getPosition()),n.close(),$(e[a.index]).addClass("active").siblings().removeClass("active"),$("#map-canvas").animate({height:300}),$(".image-slider").fadeIn("slow")}),a.addListener("mouseover",function(){n.setZIndex(1e3),n.open(i,a)}),a.addListener("mouseout",function(){n.close()})}function o(){var e={lat:31.9639977,lng:35.90654797};i=new google.maps.Map(document.getElementById("map-canvas"),{center:e,scrollwheel:!1,zoom:3,mapTypeControl:!1})}var i,s=[];$.ajax({type:"GET",dataType:"jsonp",cache:!1,url:"https://api.instagram.com/v1/users/336431628/media/recent/?access_token=829290775.5f79be6.e09d3652a36f42cea5f8426426d844f8",success:function(t){for(var o=t.data,i=0;i<o.length;i++){var c={lat:o[i].location.latitude,lng:o[i].location.longitude,name:o[i].location.name},l={url:o[i].images.standard_resolution.url,name:o[i].location.name,likes:o[i].likes.count,comments:o[i].comments.count,date:o[i].created_time};e(i,c),s.push(o[i].images.thumbnail.url),n(i,c),a(l)}$(".image-wrapper.template").remove()}}),$(document).ready(function(){o(),$("#location-select").change(function(){$("#map-canvas").animate({height:800})})})}();