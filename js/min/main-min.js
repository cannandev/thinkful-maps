!function(){function e(e){var n=document.getElementById("location-select");n.innerHTML="";for(var a=0;a<e.length;a++){var o=document.createElement("option"),i={name:e[a].location.name,lat:e[a].location.latitude,lng:e[a].location.longitude};o.text=e[a].location.name,o.value=a,n.appendChild(o),$(n).on("change",i,t)}n[0].selectedIndex=0}function t(e){var t=$("#location-select").find("option:selected").text();e.data.name===t&&(i.setCenter(e.data),console.log(e.data))}function n(e){var t=new Date(1e3*parseInt(e.date)),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=$(".image-wrapper.template").clone().removeClass("template");a.find("img").attr({src:e.url,alt:e.name}),a.find(".likes").text(e.likes+" likes"),a.find(".comments").text(e.comments+" comments"),a.find(".date").text("Last visited on "+n[t.getMonth()]+" "+t.getDate()),$(".image-slider").append(a)}function a(e,t){var n=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,position:t,title:t.name,index:e}),a=$(".details .image-wrapper"),o=new google.maps.InfoWindow({content:"<h4>"+n.title+'</h4><img src="'+l[n.index]+'"/>'});n.addListener("click",function(){i.setCenter(n.getPosition()),$(a[n.index]).addClass("active"),$("#map-canvas").animate({height:300}),$(".details").fadeIn("slow")}),n.addListener("mouseover",function(){o.setZIndex(1e3),o.open(i,n)}),n.addListener("mouseout",function(){o.close()})}function o(){var e={lat:31.9639977,lng:35.90654797};i=new google.maps.Map(document.getElementById("map-canvas"),{center:e,scrollwheel:!1,zoom:3})}var i,l=[];$.ajax({type:"GET",dataType:"jsonp",cache:!1,url:"https://api.instagram.com/v1/users/336431628/media/recent/?access_token=829290775.5f79be6.e09d3652a36f42cea5f8426426d844f8",success:function(t){var o=t.data;e(o);for(var i=0;i<o.length;i++){var c={lat:o[i].location.latitude,lng:o[i].location.longitude,name:o[i].location.name},s={url:o[i].images.standard_resolution.url,name:o[i].location.name,likes:o[i].likes.count,comments:o[i].comments.count,date:o[i].created_time};l.push(o[i].images.thumbnail.url),a(i,c),n(s)}}}),$(document).ready(function(){o(),$("#location-select").change(function(){$("#map-canvas").animate({height:800})})})}();